// å‚è€ƒè‡ª https://observablehq.com/@d3/pannable-chart

/**
 *
 * æ„å»º svg
 *
 */
const container = document.getElementById("container"); // å›¾åƒçš„å®¹å™¨

// è·å–å°ºå¯¸å¤§å°
const width = container.clientWidth; // é¡µé¢å®½åº¦
const totalWidth = width * 6; // svg çš„å®½åº¦æ˜¯é¡µé¢å®½åº¦çš„ 6 å€
const height = container.clientHeight; // é«˜åº¦
// margin ä¸ºå‰ç¼€çš„å‚æ•°
// å…¶ä½œç”¨æ˜¯åœ¨ svg çš„å¤–å‘¨ç•™ç™½ï¼Œæ„å»ºä¸€ä¸ªæ˜¾ç¤ºçš„å®‰å…¨åŒºï¼Œä»¥ä¾¿åœ¨å››å‘¨æ˜¾ç¤ºåæ ‡è½´
const marginTop = 20;
const marginRight = 20;
const marginBottom = 30;
const marginLeft = 30;

// // åˆ›å»º svg
// // åœ¨å®¹å™¨ <div id="container"> å…ƒç´ å†…åˆ›å»ºä¸€ä¸ª SVG å…ƒç´ 
// // è¿”å›ä¸€ä¸ªé€‰æ‹©é›†ï¼Œåªæœ‰ svg ä¸€ä¸ªå…ƒç´ 
// const svg = d3
//   .select("#container")
//   .append("svg")
//   .attr("width", width)
//   .attr("height", height)
//   .attr("viewBox", [0, 0, width, height]);

/**
 *
 * å¼‚æ­¥è·å–æ•°æ®
 * å†åœ¨å›è°ƒå‡½æ•°ä¸­æ‰§è¡Œç»˜åˆ¶æ“ä½œ
 *
 */
// æ•°æ®æ¥æºç½‘é¡µ https://observablehq.com/@d3/pannable-chart çš„æ–‡ä»¶é™„ä»¶
const dataURL =
  "https://gist.githubusercontent.com/Benbinbin/61a819373d0eada06b7966a560aafc7e/raw/979711fba712b0263309234239bfbd144a8a3edc/aapl.csv";

d3.csv(dataURL, d3.autoType).then((data) => {
  // éœ€è¦æ£€æŸ¥ä¸€ä¸‹æ•°æ®è§£æçš„ç»“æœï¼Œå¯èƒ½å¹¶ä¸æ­£ç¡®ï¼Œéœ€è¦åœ¨åé¢çš„æ­¥éª¤é‡Œå†è¿›è¡Œç›¸åº”çš„å¤„ç†
  console.log(data);

  /**
   *
   * æ„å»ºæ¯”ä¾‹å°º
   *
   */
  // è®¾ç½®æ¨ªåæ ‡è½´çš„æ¯”ä¾‹å°º
  // æ¨ªåæ ‡è½´çš„æ•°æ®æ˜¯æ—¥æœŸï¼ˆæ—¶é—´ï¼‰ï¼Œä½¿ç”¨ d3.scaleUtc æ„å»ºä¸€ä¸ªæ—¶é—´æ¯”ä¾‹å°ºï¼ˆè¿ç»­å‹æ¯”ä¾‹å°ºçš„ä¸€ç§ï¼‰
  // è¯¥æ—¶é—´æ¯”ä¾‹å°ºé‡‡ç”¨åè°ƒä¸–ç•Œæ—¶ UTCï¼Œå¤„äºä¸åŒæ—¶åŒºçš„ç”¨æˆ·ä¹Ÿä¼šæ˜¾ç¤ºåŒæ ·çš„æ—¶é—´
  // å…·ä½“å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ https://d3js.org/d3-scale/time
  // æˆ–è¿™ä¸€ç¯‡ç¬”è®° https://datavis-note.benbinbin.com/article/d3/core-concept/d3-concept-scale#æ—¶é—´æ¯”ä¾‹å°º-time-scales
  // Create the horizontal (x) scale over the total width.
  const x = d3.scaleUtc()
      // è®¾ç½®å®šä¹‰åŸŸèŒƒå›´
      // ä»æ•°æ®é›†çš„æ¯ä¸ªæ•°æ®ç‚¹ä¸­æå–å‡ºæ—¥æœŸï¼ˆæ—¶é—´ï¼‰ï¼Œå¹¶ç”¨ d3.extent() è®¡ç®—å‡ºå®ƒçš„èŒƒå›´
      .domain(d3.extent(data, d => d.date))
      // è®¾ç½®å€¼åŸŸèŒƒå›´ï¼ˆæ‰€æ˜ å°„çš„å¯è§†å…ƒç´ ï¼‰
      // svg å…ƒç´ çš„å®½åº¦ï¼ˆå‡å»ç•™ç™½åŒºåŸŸï¼‰
      .range([marginLeft, totalWidth - marginRight]);

  // è®¾ç½®çºµåæ ‡è½´çš„æ¯”ä¾‹å°º
  // çºµåæ ‡è½´çš„æ•°æ®æ˜¯è¿ç»­å‹çš„æ•°å€¼ï¼ˆè‚¡ä»·ï¼‰ï¼Œä½¿ç”¨ d3.scaleLinear æ„å»ºä¸€ä¸ªçº¿æ€§æ¯”ä¾‹å°º
  const y = d3.scaleLinear()
      // è®¾ç½®å®šä¹‰åŸŸèŒƒå›´
      // [0, ymax] å…¶ä¸­ ymax æ˜¯è‚¡ä»·çš„æœ€é«˜å€¼
      // é€šè¿‡ d3.max(data, d => d.close) ä»æ•°æ®é›†ä¸­è·å–è‚¡ä»·çš„æœ€å¤§å€¼
      // å¹¶ä½¿ç”¨ continuous.nice(count) æ–¹æ³•ç¼–è¾‘å®šä¹‰åŸŸçš„èŒƒå›´ï¼Œé€šè¿‡å››èˆäº”å…¥ä½¿å…¶ä¸¤ç«¯çš„å€¼æ›´ã€Œæ•´é½ã€nice
      // å…¶ä¸­å‚æ•° count æ˜¯ä¸€ä¸ªæ•°å­—ï¼Œç”¨äºè®¾ç½®è¯¥æ¯”ä¾‹å°ºæ‰€å¯¹åº”çš„åæ ‡è½´çš„åˆ»åº¦çº¿æ•°é‡ï¼ŒD3 ä¼šä»¥æ­¤ä½œä¸ºä¸€ä¸ªå‚è€ƒå€¼ï¼ˆæœ€ç»ˆç”Ÿæˆçš„åˆ»åº¦çº¿æ•°é‡å¯èƒ½ä¸ count ä¸åŒï¼‰ï¼Œä»¥ä¾¿åˆ»åº¦åˆ’åˆ†æ›´åˆç†
      // å…·ä½“å‚è€ƒå®˜æ–¹æ–‡æ¡£ https://d3js.org/d3-scale/linear#linear_nice
      .domain([0, d3.max(data, d => d.close)]).nice(6)
      // è®¾ç½®å€¼åŸŸèŒƒå›´
      // svg å…ƒç´ çš„é«˜åº¦ï¼ˆå‡å»ç•™ç™½åŒºåŸŸï¼‰
      .range([height - marginBottom, marginTop]);

  /**
   *
   * åˆ›å»ºå®¹å™¨
   *
   */
  // åˆ›å»ºä¸€ä¸ª <div> å…ƒç´ ä½œä¸ºä¸¤ä¸ª <svg> çš„å®¹å™¨ï¼š
  // * å…¶ä¸­ä¸€ä¸ª svg åŒ…å«é¢ç§¯å½¢çŠ¶å’Œæ¨ªåæ ‡è½´ï¼ˆå®ƒè¿›ä¸€æ­¥åŒ…è£¹åœ¨ä¸€ä¸ªå­å®¹å™¨ <div> é‡Œï¼Œå­å®¹å™¨å¯ä»¥åœ¨çˆ¶å…ƒç´ é‡Œæ¨ªå‘æ»šåŠ¨ï¼Œå®ç°é¢ç§¯å›¾çš„æ°´å¹³å¯æ»šåŠ¨çš„æ•ˆæœï¼‰
  // * å¦ä¸€ä¸ª svg åŒ…å«çºµåæ ‡è½´
  // Create a div that holds two svg elements: one for the main chart and horizontal axis,
  // which moves as the user scrolls the content; the other for the vertical axis (which
  // doesnâ€™t scroll).
  const parent = d3
    .select("#container")
    .append("div");


  /**
   *
   * ç»˜åˆ¶åæ ‡è½´
   *
   */
  // åœ¨çˆ¶å®¹å™¨é‡Œåˆ›å»ºä¸€ä¸ª svg ç”¨äºç»˜åˆ¶çºµåæ ‡è½´
  parent.append("svg")
      .attr("width", width) // svg å®½åº¦ä¸é¡µé¢å®½åº¦ä¸€è‡´ï¼Œæ‰€ä»¥è¯¥å…ƒç´ ä¸ä¼šæ»šåŠ¨
      .attr("height", height)
      .style("position", "absolute") // é‡‡ç”¨ absolute å®šä½ï¼Œç„¶åé€šè¿‡å±æ€§ z-index è®¾ç½®å±‚å é¡ºåº
      // é€šè¿‡è®¾ç½® CSS å±æ€§ pointer-events ä¸º "none" ä½¿è¯¥ svg å…ƒç´ æ— æ³•æˆä¸ºé¼ æ ‡äº‹ä»¶çš„ç›®æ ‡
      // å³åœ¨è¯¥å…ƒç´ ä¸Šçš„é¼ æ ‡æ“ä½œä¼šç©¿é€è¯¥å…ƒç´ ï¼Œä½œç”¨äºå…¶ä¸‹æ–¹çš„å…ƒç´ ï¼Œä»¥ä¾¿å¯ä»¥åœ¨çºµåæ ‡è½´å‡ºä¹Ÿå¯ä»¥æ“ä½œï¼ˆå·¦å³å¹³ç§»ï¼‰é¢ç§¯å›¾
      .style("pointer-events", "none")
      .style("z-index", 1) // è¯¥ svg å…ƒç´ å äºå¦ä¸€ä¸ª svg å…ƒç´ çš„ä¸Šå±‚
    .append("g") // æ·»åŠ ä¸€ä¸ª <g> å…ƒç´ ä½œä¸ºçºµåæ ‡è½´çš„å®¹å™¨
      // é€šè¿‡è®¾ç½® CSS çš„ transform å±æ€§å°†çºµå‘åæ ‡è½´å®¹å™¨ã€Œç§»åŠ¨ã€åˆ°å·¦ä¾§
      .attr("transform", `translate(${marginLeft},0)`)
      // çºµè½´æ˜¯ä¸€ä¸ªåˆ»åº¦å€¼æœå·¦çš„åæ ‡è½´
      // é€šè¿‡ axis.ticks(count) è®¾ç½®åˆ»åº¦æ•°é‡çš„å‚è€ƒå€¼ï¼ˆé¿å…åˆ»åº¦è¿‡å¤šå¯¼è‡´åˆ»åº¦å€¼é‡å è€Œå½±å“å›¾è¡¨çš„å¯è¯»æ€§ï¼‰
      .call(d3.axisLeft(y).ticks(6))
      // åˆ æ‰ä¸Šä¸€æ­¥æ‰€ç”Ÿæˆçš„åæ ‡è½´çš„è½´çº¿ï¼ˆå®ƒå«æœ‰ domain ç±»åï¼‰
      .call(g => g.select(".domain").remove())
      // ä¸ºçºµåæ ‡è½´æ·»åŠ æ ‡æ³¨ä¿¡æ¯
      // é€‰ä¸­æœ€åä¸€ä¸ªåˆ»åº¦å€¼ï¼Œå³ <text> å…ƒç´ ï¼Œå¹¶è¿›è¡Œå¤åˆ¶
      .call(g => g.select(".tick:last-of-type text").clone()
          .attr("x", 3) // è®¾ç½®å…ƒç´ çš„åç§»é‡
          .attr("text-anchor", "start") // è®¾ç½®æ–‡å­—çš„å¯¹é½æ–¹å¼
          .attr("font-weight", "bold") // è®¾ç½®å­—ä½“ç²—ç»†
          .text("$ Close")); // è®¾ç½®æ–‡æœ¬å†…å®¹

  // åˆ›å»ºä¸€ä¸ªå¯æ»šåŠ¨çš„ <div> å…ƒç´ ä½œä¸ºå­å®¹å™¨ï¼ŒåŒ…å«é¢ç§¯å½¢çŠ¶å’Œæ¨ªåæ ‡è½´
  // Create a scrolling div containing the area shape and the horizontal axis.
  const scrollBody = parent.append("div")
      // é€šè¿‡è®¾ç½® CSS çš„ overflow-x å±æ€§ä¸º scroll å…è®¸è¯¥å…ƒç´ æ¨ªå‘æ»šåŠ¨
      .style("overflow-x", "scroll")
      // é€šè¿‡è®¾ç½® CSS çš„ -webkit-overflow-scrolling å±æ€§æ§åˆ¶å…ƒç´ åœ¨ç§»åŠ¨è®¾å¤‡ä¸Šæ˜¯å¦åŸºäºåŠ¨é‡æ»šåŠ¨
      // å°†è¯¥å±æ€§å€¼è®¾ç½®ä¸º touch ä½¿ç”¨åŸºäºåŠ¨é‡çš„æ»šåŠ¨ï¼Œå³æ‰‹æŒ‡ä»è§¦æ‘¸å±ä¸ŠæŠ¬èµ·ï¼Œæ»šåŠ¨ä¼šç»§ç»­ä¸€å°æ®µæ—¶é—´
      // å…·ä½“å‚è€ƒç›¸å…³æ–‡æ¡£ https://developer.apple.com/library/archive/documentation/AppleApplications/Reference/SafariCSSRef/Articles/StandardCSSProperties.html#//apple_ref/css/property/-webkit-overflow-scrolling å’Œ https://developer.mozilla.org/ko/docs/orphaned/Web/CSS/-webkit-overflow-scrolling
      // âš ï¸ ä½†è¿™æ˜¯éæ ‡å‡†å±æ€§ï¼Œä¸æ¨èåœ¨ç”Ÿäº§ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œå¯èƒ½å­˜åœ¨å…¼å®¹é—®é¢˜
      .style("-webkit-overflow-scrolling", "touch");

  // åœ¨å­å®¹å™¨é‡Œåˆ›å»ºä¸€ä¸ª svg ç”¨äºç»˜åˆ¶é¢ç§¯å›¾å’Œæ¨ªåæ ‡è½´
  const svg = scrollBody.append("svg")
      .attr("width", totalWidth) // svg å®½åº¦æ˜¯é¡µé¢å®½åº¦çš„ 6 å€ï¼Œæ‰€ä»¥è¯¥å…ƒç´ å¯ä»¥æ°´å¹³æ»šåŠ¨
      .attr("height", height)
      .style("display", "block");

  // æ·»åŠ ä¸€ä¸ª <g> å…ƒç´ ä½œä¸ºæ¨ªåæ ‡è½´çš„å®¹å™¨
  svg.append("g")
    // é€šè¿‡è®¾ç½® CSS çš„ transform å±æ€§å°†æ¨ªåæ ‡è½´å®¹å™¨ã€Œç§»åŠ¨ã€åˆ°åº•éƒ¨
    .attr("transform", `translate(0,${height - marginBottom})`)
    // æ¨ªè½´æ˜¯ä¸€ä¸ªåˆ»åº¦å€¼æœä¸‹çš„åæ ‡è½´
    .call(d3.axisBottom(x)
          // é€šè¿‡ axis.ticks(interval) æ˜¾å¼åœ°è®¾ç½®åæ ‡è½´åˆ»åº¦åº”è¯¥å¦‚ä½•ç”Ÿæˆï¼ˆç›¸éš”å¤šè¿œç”Ÿæˆä¸€ä¸ªåˆ»åº¦ï¼‰
          // åŸºäº D3 å†…ç½®çš„è¾¹è·è®¡ç®—å™¨ d3.utcMonthï¼ˆä»¥ä¸€ä¸ªä»¥æœˆä¸ºé—´è·çš„ intervalï¼‰ï¼Œä½¿ç”¨æ–¹æ³• interval.every(step) å¯¹å…¶è¿›è¡Œå®šåˆ¶
          // è¿™é‡Œ d3.utcMonth.every(1200 / width) è¡¨ç¤ºåŸºäºé¡µé¢çš„å®½åº¦ width è°ƒæ•´é‡‡æ ·çš„æ­¥é•¿ï¼ˆåŸæ¥çš„æ¯ä¸ªæœˆè¿›è¡Œé‡‡æ ·ç”Ÿæˆæ¨ªåæ ‡è½´çš„åˆ»åº¦ï¼‰ï¼Œå¦‚æœé¡µé¢å®½åº¦ width è¾ƒå°æ—¶ 1200/width å°±å¯èƒ½å¤§äº 1ï¼Œåˆ™è¡¨ç¤ºä¸æ˜¯æ¯ä¸ªæœˆé‡‡æ ·ï¼Œå³å¯èƒ½é—´éš”å¤šä¸ªæœˆæ‰ç”Ÿæˆä¸€æ¡åˆ»åº¦çº¿
          // ğŸ’¡ ä»¥ä¸Šæ–¹æ³•å¯ä»¥æ›´ç»†è‡´åœ°æ§åˆ¶åˆ»åº¦çº¿çš„ç”Ÿæˆæ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä½¿ç”¨ axis.ticks(count) çš„å½¢å¼è®¾ç½®åˆ»åº¦æ•°é‡çš„å‚è€ƒå€¼ï¼ˆä½†æ˜¯å¯èƒ½æ— æ³•æ›´å¥½åœ°é€‚åº”é¡µé¢çš„å®½åº¦ï¼‰
          .ticks(d3.utcMonth.every(1200 / width))
          // è€Œä¸”å°†åæ ‡è½´çš„å¤–ä¾§åˆ»åº¦ tickSizeOuter é•¿åº¦è®¾ç½®ä¸º 0ï¼ˆå³å–æ¶ˆåæ ‡è½´é¦–å°¾ä¸¤ç«¯çš„åˆ»åº¦ï¼‰
          .tickSizeOuter(0));

  /**
   *
   * ç»˜åˆ¶é¢ç§¯å›¾å†…çš„é¢ç§¯å½¢çŠ¶
   *
   */
  // ä½¿ç”¨ d3.area() åˆ›å»ºä¸€ä¸ªé¢ç§¯ç”Ÿæˆå™¨
  // é¢ç§¯ç”Ÿæˆå™¨ä¼šåŸºäºç»™å®šçš„æ•°æ®ç”Ÿæˆé¢ç§¯å½¢çŠ¶
  // è°ƒç”¨é¢ç§¯ç”Ÿæˆå™¨æ—¶è¿”å›çš„ç»“æœï¼Œä¼šåŸºäºç”Ÿæˆå™¨æ˜¯å¦è®¾ç½®äº†ç”»å¸ƒä¸Šä¸‹æ–‡ context è€Œä¸åŒã€‚å¦‚æœè®¾ç½®äº†ç”»å¸ƒä¸Šä¸‹æ–‡ contextï¼Œåˆ™ç”Ÿæˆä¸€ç³»åˆ—åœ¨ç”»å¸ƒä¸Šç»˜åˆ¶è·¯å¾„çš„æ–¹æ³•ï¼Œé€šè¿‡è°ƒç”¨å®ƒä»¬å¯ä»¥å°†è·¯å¾„ç»˜åˆ¶åˆ°ç”»å¸ƒä¸Šï¼›å¦‚æœæ²¡æœ‰è®¾ç½®ç”»å¸ƒä¸Šä¸‹æ–‡ contextï¼Œåˆ™ç”Ÿæˆå­—ç¬¦ä¸²ï¼Œå¯ä»¥ä½œä¸º `<path>` å…ƒç´ çš„å±æ€§ `d` çš„å€¼
  // å…·ä½“å¯ä»¥å‚è€ƒå®˜æ–¹æ–‡æ¡£ https://d3js.org/d3-shape/area
  // æˆ–è¿™ä¸€ç¯‡ç¬”è®° https://datavis-note.benbinbin.com/article/d3/core-concept/d3-concept-shape#é¢ç§¯ç”Ÿæˆå™¨-areas
  const area = d3.area()
      // è®¾ç½®ä¸¤ç‚¹ä¹‹é—´çš„æ›²çº¿æ’å€¼å™¨ï¼Œè¿™é‡Œä½¿ç”¨ D3 æ‰€æä¾›çš„ä¸€ç§å†…ç½®æ›²çº¿æ’å€¼å™¨ d3.curveStep
      // è¯¥æ’å€¼æ•ˆæœæ˜¯åœ¨ä¸¤ä¸ªæ•°æ®ç‚¹ä¹‹é—´ï¼Œç”Ÿæˆé˜¶æ¢¯å½¢çŠ¶çš„çº¿æ®µï¼ˆä½œä¸ºé¢ç§¯å›¾çš„è¾¹ç•Œï¼‰
      // å…·ä½“æ•ˆæœå‚è€ƒ https://d3js.org/d3-shape/curve#curveStep
      .curve(d3.curveStep)
      // è®¾ç½®ä¸‹è¾¹ç•Œçº¿æ¨ªåæ ‡è¯»å–å‡½æ•°
      // è¯¥å‡½æ•°ä¼šåœ¨è°ƒç”¨é¢ç§¯ç”Ÿæˆå™¨æ—¶ï¼Œä¸ºæ•°ç»„ä¸­çš„æ¯ä¸€ä¸ªå…ƒç´ éƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œä»¥è¿”å›è¯¥æ•°æ®æ‰€å¯¹åº”çš„æ¨ªåæ ‡
      // è¿™é‡ŒåŸºäºæ¯ä¸ªæ•°æ®ç‚¹çš„æ—¥æœŸï¼ˆæ—¶é—´ï¼‰d.date å¹¶é‡‡ç”¨æ¯”ä¾‹å°º x è¿›è¡Œæ˜ å°„ï¼Œè®¡ç®—å‡ºç›¸åº”çš„æ¨ªåæ ‡
      .x(d => x(d.date))
      // è®¾ç½®ä¸‹è¾¹ç•Œçº¿çš„çºµåæ ‡çš„è¯»å–å‡½æ•°
      // è¿™é‡Œçš„é¢ç§¯å›¾çš„ä¸‹è¾¹ç•Œçº¿æ˜¯æ¨ªåæ ‡è½´ï¼Œæ‰€ä»¥å®ƒçš„ y å€¼å§‹ç»ˆæ˜¯ 0ï¼Œå¹¶é‡‡ç”¨æ¯”ä¾‹å°º y è¿›è¡Œæ˜ å°„ï¼Œå¾—åˆ°çºµåæ ‡è½´åœ¨ svg ä¸­çš„åæ ‡ä½ç½®
      .y0(y(0))
      // è®¾ç½®ä¸Šè¾¹ç•Œçº¿çš„çºµåæ ‡çš„è¯»å–å‡½æ•°
      .y1(d => y(d.close));

  // å°†é¢ç§¯å½¢çŠ¶ç»˜åˆ¶åˆ°é¡µé¢ä¸Š
  svg.append("path") // ä½¿ç”¨è·¯å¾„ <path> å…ƒç´ ç»˜åˆ¶é¢ç§¯å½¢çŠ¶
      // ç»‘å®šæ•°æ®
      .datum(data)
      // å°†é¢ç§¯çš„å¡«å……é¢œè‰²è®¾ç½®ä¸ºè“è‰²
      .attr("fill", "steelblue")
      // ç”±äºé¢ç§¯ç”Ÿæˆå™¨å¹¶æ²¡æœ‰è°ƒç”¨æ–¹æ³• area.context(canvasContext) è®¾ç½®ç”»å¸ƒä¸Šä¸‹æ–‡
      // æ‰€ä»¥è°ƒç”¨é¢ç§¯ç”Ÿæˆå™¨ area è¿”å›çš„ç»“æœæ˜¯å­—ç¬¦ä¸²
      // è¯¥å€¼ä½œä¸º `<path>` å…ƒç´ çš„å±æ€§ `d` çš„å€¼
      .attr("d", area);

  // ä½¿ç”¨ element.scrollBy(x-coord) æ–¹æ³•è®¾ç½®å­å®¹å™¨æ»šåŠ¨çš„åˆå§‹å€¼
  // é¢ç§¯å›¾çš„åˆå§‹çŠ¶æ€æ˜¯æ»šåŠ¨åˆ°æœ€å³ä¾§
  // Initialize the scroll offset after yielding the chart to the DOM.
  scrollBody.node().scrollBy(totalWidth, 0);
});
